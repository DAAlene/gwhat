\documentclass[TechnicalNoteMeteo.tex]{subfiles}

\begin{document}

It is possible to use the algorithm with the Graphical User Interface~(GUI) that is included in the free and open source software WHAT (Well Hydrograph Analysis Toolbox). A detailed description on the use of the algorithm with WHAT is provided in the user guide of the software \citep{gosselin_what_2015}.

Alternately, the gap-filling algorithm can be run directly from the command line in a Python interpreter version 2.7 or 3.4 or later. This section will cover this approach. The external libraries \emph{NumPy}, \emph{Matplotlib}, \emph{xlrd}, \emph{PySide} and \emph{Statsmodels} are required for the program to run. A minimal working example of an application is documented at the end of the python file. Some data samples to run the example are also provided with the algorithm.

The present section of this paper covers the format of the input data that is required for running the algorithm, the parameters of the method, and the various outputs that are generated after a gap-less weather dataset has been successfully produced with the algorithm. Additional information about the input and output of the gap-filling algorithm is also provided in the user guide of the WHAT software.

\subsection{Input Data}\label{subsec:input}

It is possible to use weather data from any sources with the gap-filling algorithm, as long as the data are saved in tab-separated values file with the `.csv' extension. Also, the labels in the first column of the file must be faithfully observed, since the algorithm is reading these to know where to retrieve the station information and the weather data within the file. It is recommended to use a copy of one of the sample files that are provided with the algorithm and fill-in directly the station information and the weather data. A ``NaN'' value must be entered where data are missing. The daily data must also be in chronological order, but do not need to be continuous over time. That is, missing blocks of data (e.g., several days, months or years) can be completely omitted from the time-series. 

All the input weather data files must be saved in one single location that must be specified to the gap-filling algorithm. The algorithm will automatically scan this location for valid weather data files and will store the data in memory for future analysis.

\subsection{Parameters}\label{sec:parameters}

The gap-filling algorithm is written as a Python class object, with the method parameters defined as class attributes. When using the gap-filling algorithm directly in a Python interpreter (without the GUI), the method parameters are specified by directly defining the value of their corresponding class attribute. An example is given at the end of the python file and each parameter is documented in the help section of the algorithm class, within the code. Additional information is also provided in the user guide of the WHAT software. A list of the different method parameters for the current version of the algorithm is presented in \cref{tab:method_parameter} in \ref{appendix}.

\subsection{Output}\label{sec:output}

All the outputs that are produced after a gapless weather dataset has been produced successfully are saved in a sub-folder that is named after the name of the target station, in a directory that must be specified to the gap-filling algorithm. A list of the different output files that are produced with the current version of the algorithm is presented in \cref{tab:output_files} in \ref{appendix} a brief overview is given below.

The gap-less weather datasets are saved in a tab-separated values file with a `.out' extension. Detailed information about the estimated values that were used to fill the gaps in the data series are also saved in an accompanying `.log' file. An histogram showing the yearly and monthly weather normals, calculated from the gap-less data series previously generated with the algorithm, is also produced and saved in a pdf format. 

The results from the cross-validation procedure, if the option is enabled in the algorithm, are saved in a tab-separated values file with a `.err' extension. A figure comparing the probability density function of the original and the estimated daily precipitation series is also produced and saved in a pdf format. Scatter plots comparing the estimated and measured daily weather data are also produced for each variable of the dataset and saved in a pdf format. Example of the figure produced with the gap-filling algorithm are shown in \cref{sec:MontEstCaseStudy} where a study case is presented.

\end{document}
